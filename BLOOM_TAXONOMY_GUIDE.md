# å¸ƒé²å§†è®¤çŸ¥å±‚çº§æ ‡æ³¨Pipelineä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬Pipelineä½¿ç”¨AI Agentè‡ªåŠ¨å¯¹çŸ¥è¯†å›¾è°±ä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œå¸ƒé²å§†è®¤çŸ¥ç›®æ ‡åˆ†ç±»ï¼ˆBloom's Taxonomyï¼‰æ ‡æ³¨ã€‚

## ğŸ¯ å¸ƒé²å§†è®¤çŸ¥å±‚çº§

å¸ƒé²å§†è®¤çŸ¥ç›®æ ‡åˆ†ç±»å°†å­¦ä¹ ç›®æ ‡åˆ†ä¸ºå…­ä¸ªå±‚çº§ï¼ˆç”±ä½åˆ°é«˜ï¼‰ï¼š

1. **è®°å¿†ï¼ˆRememberï¼‰** 
   - è¯†åˆ«å’Œå›å¿†ç›¸å…³çŸ¥è¯†
   - å…³é”®è¯ï¼šè®°ä½ã€åˆ—ä¸¾ã€è¯†åˆ«ã€å›å¿†ã€å®šä¹‰
   - ç¤ºä¾‹ï¼šè®°ä½é›†åˆçš„å®šä¹‰ï¼Œè¯†åˆ«æ•°å­¦ç¬¦å·

2. **ç†è§£ï¼ˆUnderstandï¼‰**
   - ç†è§£ææ–™çš„å«ä¹‰ï¼Œèƒ½å¤Ÿè§£é‡Šå’Œè¯´æ˜
   - å…³é”®è¯ï¼šè§£é‡Šã€æè¿°ã€è¯´æ˜ã€æ¦‚æ‹¬ã€åˆ†ç±»
   - ç¤ºä¾‹ï¼šç†è§£å‡½æ•°çš„æ¦‚å¿µï¼Œè§£é‡Šé›†åˆä¹‹é—´çš„å…³ç³»

3. **åº”ç”¨ï¼ˆApplyï¼‰**
   - åœ¨æ–°æƒ…å¢ƒä¸­ä½¿ç”¨ä¿¡æ¯å’Œè§„åˆ™
   - å…³é”®è¯ï¼šåº”ç”¨ã€ä½¿ç”¨ã€è®¡ç®—ã€æ±‚è§£ã€å®æ–½
   - ç¤ºä¾‹ï¼šåº”ç”¨åŸºæœ¬ä¸ç­‰å¼æ±‚æœ€å€¼ï¼Œä½¿ç”¨äºŒåˆ†æ³•æ±‚è§£æ–¹ç¨‹

4. **åˆ†æï¼ˆAnalyzeï¼‰**
   - å°†ä¿¡æ¯åˆ†è§£ä¸ºç»„æˆéƒ¨åˆ†ï¼Œç†è§£ç»“æ„å’Œå…³ç³»
   - å…³é”®è¯ï¼šåˆ†æã€åŒºåˆ†ã€æ¯”è¾ƒã€æ¨å¯¼ã€å½’å› 
   - ç¤ºä¾‹ï¼šåˆ†æå‡½æ•°çš„å•è°ƒæ€§ï¼Œæ¯”è¾ƒä¸åŒé›†åˆè¿ç®—çš„å…³ç³»

5. **è¯„ä»·ï¼ˆEvaluateï¼‰**
   - åŸºäºæ ‡å‡†å’Œå‡†åˆ™åšå‡ºåˆ¤æ–­
   - å…³é”®è¯ï¼šè¯„ä»·ã€åˆ¤æ–­ã€æ‰¹åˆ¤ã€è®ºè¯ã€è¾©æŠ¤
   - ç¤ºä¾‹ï¼šè¯„ä»·ä¸åŒè§£é¢˜æ–¹æ³•çš„ä¼˜åŠ£ï¼Œåˆ¤æ–­è¯æ˜çš„æ­£ç¡®æ€§

6. **åˆ›é€ ï¼ˆCreateï¼‰**
   - ç»„åˆå…ƒç´ å½¢æˆæ–°çš„æ•´ä½“æˆ–ç»“æ„
   - å…³é”®è¯ï¼šåˆ›é€ ã€è®¾è®¡ã€æ„å»ºã€è§„åˆ’ã€ç”Ÿæˆ
   - ç¤ºä¾‹ï¼šæ„å»ºæ–°çš„æ•°å­¦æ¨¡å‹ï¼Œè®¾è®¡è§£é¢˜ç­–ç•¥

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### 1. å·¥å…·å±‚ï¼ˆToolsï¼‰

ä½ç½®ï¼š`tools/bloom_taxonomy_tools.py`

åŒ…å«ä»¥ä¸‹å·¥å…·å‡½æ•°ï¼š

#### æ ‡æ³¨å·¥å…·ï¼ˆ6ä¸ªï¼‰
- `tag_knowledge_point_remember()` - æ ‡è®°ä¸º"è®°å¿†"å±‚çº§
- `tag_knowledge_point_understand()` - æ ‡è®°ä¸º"ç†è§£"å±‚çº§
- `tag_knowledge_point_apply()` - æ ‡è®°ä¸º"åº”ç”¨"å±‚çº§
- `tag_knowledge_point_analyze()` - æ ‡è®°ä¸º"åˆ†æ"å±‚çº§
- `tag_knowledge_point_evaluate()` - æ ‡è®°ä¸º"è¯„ä»·"å±‚çº§
- `tag_knowledge_point_create()` - æ ‡è®°ä¸º"åˆ›é€ "å±‚çº§

#### æŸ¥è¯¢å·¥å…·
- `get_knowledge_points()` - åˆ†é¡µè·å–çŸ¥è¯†ç‚¹
- `get_all_knowledge_points()` - è·å–æ‰€æœ‰çŸ¥è¯†ç‚¹
- `get_tagging_progress()` - è·å–æ ‡æ³¨è¿›åº¦ç»Ÿè®¡

### 2. Agentå±‚

ä½ç½®ï¼š`agents/bloom_taxonomy_agent.py`

#### Knowledge Reviewer Agent
- **ä½œç”¨**ï¼šç¬¬ä¸€é˜¶æ®µé¢„è§ˆå’Œç†è§£æ‰€æœ‰çŸ¥è¯†ç‚¹
- **èƒ½åŠ›**ï¼šæ‰¹é‡é˜…è¯»ã€åˆ†æçŸ¥è¯†ç»“æ„ã€è¯†åˆ«éš¾åº¦å±‚æ¬¡
- **è¾“å‡º**ï¼šæ•´ä½“è®¤çŸ¥æŠ¥å‘Š

#### Bloom Taxonomy Evaluator Agent
- **ä½œç”¨**ï¼šç¬¬äºŒé˜¶æ®µå¯¹çŸ¥è¯†ç‚¹è¿›è¡Œå¸ƒé²å§†è®¤çŸ¥å±‚çº§æ ‡æ³¨
- **èƒ½åŠ›**ï¼šç†è§£å¸ƒé²å§†åˆ†ç±»ç†è®ºã€è°ƒç”¨æ ‡æ³¨å·¥å…·ã€æä¾›ç†ç”±
- **è¾“å‡º**ï¼šæ ‡æ³¨ç»“æœå’Œç»Ÿè®¡æŠ¥å‘Š

### 3. å·¥ä½œæµå±‚ï¼ˆWorkflowï¼‰

ä½ç½®ï¼š`workflows/bloom_taxonomy_workflow.py`

ä½¿ç”¨Agnoæ¡†æ¶æ„å»ºçš„ä¸‰é˜¶æ®µå·¥ä½œæµï¼š

```
Stage 1: çŸ¥è¯†ç‚¹æ•´ä½“é¢„è§ˆ
  â”œâ”€ Prepare Review Prompt
  â””â”€ Knowledge Reviewer Agent æ‰§è¡Œ

Stage 2: æ‰¹é‡æ ‡æ³¨
  â”œâ”€ Prepare Tagging Prompt  
  â””â”€ Bloom Taxonomy Evaluator Agent æ‰§è¡Œ

Stage 3: ç”ŸæˆæŠ¥å‘Š
  â”œâ”€ Prepare Report Prompt
  â””â”€ Generate Final Report
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š

```bash
# å®‰è£…Agnoæ¡†æ¶
pip install agno

# æˆ–ä½¿ç”¨é¡¹ç›®çš„requirements.txt
pip install -r requirements.txt
```

é…ç½®APIå¯†é’¥ï¼ˆåœ¨ `config.py` æˆ–ç¯å¢ƒå˜é‡ä¸­ï¼‰ï¼š

```bash
export OPENAI_API_KEY="your-api-key"
```

### 2. è¿è¡Œç¤ºä¾‹

```bash
python examples/bloom_taxonomy_example.py
```

äº¤äº’å¼é€‰æ‹©ï¼š
- ç§‘ç›®åç§°ï¼ˆå¦‚ï¼šmath, physicsï¼‰
- ä½¿ç”¨çš„æ¨¡å‹ï¼ˆæ¨èï¼šgpt-4oï¼‰

### 3. ç¨‹åºåŒ–è°ƒç”¨

```python
from workflows.bloom_taxonomy_workflow import run_bloom_taxonomy_pipeline

# è¿è¡ŒPipeline
result = run_bloom_taxonomy_pipeline(
    subject="math",      # ç§‘ç›®
    model="gpt-4o"       # æ¨¡å‹
)

# æŸ¥çœ‹ç»“æœ
print(f"å·²æ ‡æ³¨: {result['tagged']}/{result['total']}")
print(f"å®Œæˆåº¦: {result['progress_percentage']}%")
```

### 4. å•ç‹¬ä½¿ç”¨å·¥å…·

```python
from tools.bloom_taxonomy_tools import (
    get_all_knowledge_points,
    tag_knowledge_point_understand,
    get_tagging_progress
)

# è·å–æ‰€æœ‰çŸ¥è¯†ç‚¹
result = get_all_knowledge_points(subject="math")
nodes = result["nodes"]

# æ‰‹åŠ¨æ ‡æ³¨æŸä¸ªçŸ¥è¯†ç‚¹
tag_knowledge_point_understand(
    node_id="set_definition",
    file_path="dataset/graph/math_knowledge_graph_new.json",
    reasoning="é›†åˆçš„å«ä¹‰éœ€è¦ç†è§£å’Œè§£é‡Šï¼Œå±äºç†è§£å±‚çº§"
)

# æŸ¥çœ‹è¿›åº¦
progress = get_tagging_progress(subject="math")
print(progress)
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

æ ‡æ³¨åçš„çŸ¥è¯†ç‚¹ä¼šåœ¨ `properties` ä¸­å¢åŠ ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "id": "set_definition",
  "label": "é›†åˆçš„å«ä¹‰",
  "properties": {
    "description": "...",
    "bloom_level": "Understand",
    "bloom_reasoning": "é›†åˆçš„å«ä¹‰éœ€è¦ç†è§£å’Œè§£é‡Šï¼Œå±äºç†è§£å±‚çº§"
  }
}
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ¨¡å‹

åœ¨åˆ›å»ºworkflowæ—¶æŒ‡å®šï¼š

```python
workflow = create_bloom_taxonomy_workflow(
    subject="math",
    model="gpt-4o-mini"  # ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
)
```

### æ‰¹å¤„ç†ç­–ç•¥

å¯¹äºå¤§é‡çŸ¥è¯†ç‚¹ï¼ŒAgentä¼šè‡ªåŠ¨é‡‡ç”¨æ‰¹å¤„ç†ç­–ç•¥ï¼Œå¯ä»¥åœ¨agentçš„instructionsä¸­è°ƒæ•´ã€‚

### æ ‡æ³¨æ ‡å‡†

å¯ä»¥åœ¨ `agents/bloom_taxonomy_agent.py` ä¸­ä¿®æ”¹ `system_prompt` æ¥è°ƒæ•´æ ‡æ³¨æ ‡å‡†å’Œç­–ç•¥ã€‚

## ğŸ“ˆ æŸ¥çœ‹æ ‡æ³¨è¿›åº¦

ä½¿ç”¨è¿›åº¦æŸ¥è¯¢å·¥å…·ï¼š

```python
from tools.bloom_taxonomy_tools import get_tagging_progress

progress = get_tagging_progress(subject="math")

print(f"æ€»æ•°: {progress['total']}")
print(f"å·²æ ‡æ³¨: {progress['tagged']}")
print(f"æœªæ ‡æ³¨: {progress['untagged']}")
print(f"å®Œæˆåº¦: {progress['progress_percentage']}%")

# å„å±‚çº§åˆ†å¸ƒ
for level, count in progress['level_distribution'].items():
    print(f"{level}: {count}")
```

## ğŸ¨ å·¥ä½œæµç‰¹ç‚¹

1. **ä¸¤é˜¶æ®µç†è§£**
   - ç¬¬ä¸€é˜¶æ®µï¼šæ•´ä½“é¢„è§ˆï¼Œå»ºç«‹å…¨å±€è®¤çŸ¥
   - ç¬¬äºŒé˜¶æ®µï¼šåŸºäºå…¨å±€è®¤çŸ¥è¿›è¡Œç²¾ç¡®æ ‡æ³¨

2. **æ™ºèƒ½æ¨ç†**
   - Agentç†è§£å¸ƒé²å§†åˆ†ç±»ç†è®º
   - æ ¹æ®çŸ¥è¯†ç‚¹çš„æè¿°ã€èƒ½åŠ›ç›®æ ‡ç­‰ç»¼åˆåˆ¤æ–­
   - æä¾›æ ‡æ³¨ç†ç”±ï¼Œå¯è¿½æº¯

3. **æ‰¹é‡å¤„ç†**
   - è‡ªåŠ¨å¤„ç†æ‰€æœ‰çŸ¥è¯†ç‚¹
   - æ— éœ€äººå·¥å¹²é¢„
   - æ”¯æŒå¤§è§„æ¨¡çŸ¥è¯†å›¾è°±

4. **è¿›åº¦è·Ÿè¸ª**
   - å®æ—¶æŸ¥çœ‹æ ‡æ³¨è¿›åº¦
   - ç»Ÿè®¡å„å±‚çº§åˆ†å¸ƒ
   - ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š

## ğŸ” ç¤ºä¾‹ï¼šæ ‡æ³¨ç­–ç•¥

Agentä¼šæ ¹æ®ä»¥ä¸‹ç­–ç•¥è¿›è¡Œæ ‡æ³¨ï¼š

| çŸ¥è¯†ç‚¹ç±»å‹ | å…¸å‹å¸ƒé²å§†å±‚çº§ | ç¤ºä¾‹ |
|----------|--------------|------|
| XXXçš„æ¦‚å¿µ/å®šä¹‰ | Remember/Understand | é›†åˆçš„å«ä¹‰ã€å‡½æ•°å®šä¹‰ |
| XXXçš„æ€§è´¨/å…³ç³» | Understand/Analyze | å‡½æ•°å•è°ƒæ€§ã€é›†åˆåŒ…å«å…³ç³» |
| XXXçš„æ±‚è§£/åº”ç”¨ | Apply | äºŒåˆ†æ³•æ±‚è§£ã€ä¸ç­‰å¼æ±‚è§£ |
| XXXçš„æ¨å¯¼/è¯æ˜ | Analyze | æ–¹ç¨‹æ ¹ä¸å›¾åƒäº¤ç‚¹ |
| XXXçš„å»ºæ¨¡/è®¾è®¡ | Create | æŒ‡æ•°å¢é•¿æ¨¡å‹ã€åˆ†æ®µå‡½æ•°åº”ç”¨ |
| XXXçš„è¯„ä»·/åˆ¤æ–­ | Evaluate | é€†å¦ç­‰ä»·æ€§ã€è§£æ³•ä¼˜åŠ£ |

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **APIæˆæœ¬**ï¼šä½¿ç”¨GPT-4oç­‰æ¨¡å‹ä¼šäº§ç”ŸAPIè°ƒç”¨è´¹ç”¨ï¼Œå¤§è§„æ¨¡æ ‡æ³¨å‰è¯·è¯„ä¼°æˆæœ¬

2. **æ ‡æ³¨è´¨é‡**ï¼šå»ºè®®ä½¿ç”¨GPT-4oä»¥è·å¾—æœ€ä½³æ ‡æ³¨è´¨é‡ï¼ŒGPT-4o-minié€Ÿåº¦å¿«ä½†å‡†ç¡®åº¦ç•¥ä½

3. **æ•°æ®å¤‡ä»½**ï¼šæ ‡æ³¨ä¼šç›´æ¥ä¿®æ”¹JSONæ–‡ä»¶ï¼Œå»ºè®®å…ˆå¤‡ä»½åŸå§‹æ–‡ä»¶

4. **é‡å¤æ ‡æ³¨**ï¼šé‡å¤è¿è¡Œä¼šè¦†ç›–å·²æœ‰æ ‡ç­¾ï¼Œå¦‚éœ€ä¿ç•™è¯·å…ˆå¤‡ä»½

5. **é”™è¯¯å¤„ç†**ï¼šå¦‚æœæŸäº›çŸ¥è¯†ç‚¹æ ‡æ³¨å¤±è´¥ï¼Œå¯ä»¥æŸ¥çœ‹æ—¥å¿—å¹¶æ‰‹åŠ¨æ ‡æ³¨

## ğŸ¤ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„è®¤çŸ¥å±‚çº§

å¦‚éœ€ä½¿ç”¨å…¶ä»–åˆ†ç±»ä½“ç³»ï¼Œå¯ä»¥ï¼š

1. åœ¨ `tools/bloom_taxonomy_tools.py` ä¸­æ·»åŠ æ–°çš„æ ‡æ³¨å‡½æ•°
2. åœ¨ `agents/bloom_taxonomy_agent.py` ä¸­æ›´æ–°ç³»ç»Ÿæç¤ºè¯
3. æ³¨å†Œæ–°å·¥å…·åˆ°Agent

### æ”¯æŒæ–°çš„ç§‘ç›®

åªéœ€ç¡®ä¿ `dataset/graph/` ç›®å½•ä¸‹æœ‰å¯¹åº”çš„JSONæ–‡ä»¶ï¼š

```
dataset/graph/
  â”œâ”€â”€ math_knowledge_graph_new.json
  â”œâ”€â”€ physics_knowledge_graph_new.json
  â””â”€â”€ your_subject_knowledge_graph_new.json
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Agnoæ¡†æ¶æ–‡æ¡£](https://docs.agno.com/)
- [Bloom's Taxonomyç†è®º](https://en.wikipedia.org/wiki/Bloom%27s_taxonomy)
- [çŸ¥è¯†å›¾è°±ä½¿ç”¨æŒ‡å—](./KNOWLEDGE_GRAPH_USAGE.md)

## ğŸ› é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ°æ¨¡å—

```
ModuleNotFoundError: No module named 'agno'
```

**è§£å†³**ï¼šå®‰è£…Agnoæ¡†æ¶
```bash
pip install agno
```

### é—®é¢˜2ï¼šAPIå¯†é’¥é”™è¯¯

```
OpenAI API key not found
```

**è§£å†³**ï¼šé…ç½®APIå¯†é’¥
```bash
export OPENAI_API_KEY="your-key"
```

### é—®é¢˜3ï¼šæ–‡ä»¶è·¯å¾„é”™è¯¯

```
æœªæ‰¾åˆ°ç§‘ç›® xxx çš„çŸ¥è¯†å›¾è°±æ–‡ä»¶
```

**è§£å†³**ï¼šæ£€æŸ¥ `dataset/graph/` ç›®å½•ä¸‹æ˜¯å¦æœ‰å¯¹åº”æ–‡ä»¶

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–Pull Requestã€‚


