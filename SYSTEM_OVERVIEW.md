# ç³»ç»Ÿæ€»è§ˆ

## ğŸ“ æ ¸å¿ƒä»£ç æ–‡ä»¶

```
Agno/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ node_pair_chatroom.py    â­ æ ¸å¿ƒå®ç° (550è¡Œ)
â”‚   â”œâ”€â”€ agent.py                  åŸºç¡€Agentç±»
â”‚   â”œâ”€â”€ edge.py                   è¾¹æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ gemini_client.py          APIå®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ domain_agents.py          PhysicsAgent, MathAgent
â”‚   â”œâ”€â”€ meta_agent.py             MetaAgent (åè°ƒ+æå–)
â”‚   â””â”€â”€ evaluator_agent.py        EvaluatorAgent (è¯„ä¼°)
â”‚
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ node_pair_discussion_example.py      ç¤ºä¾‹(6å¯¹)
â”‚   â”œâ”€â”€ sampled_cartesian_discussion.py      é‡‡æ ·æ¨¡å¼
â”‚   â””â”€â”€ full_cartesian_discussion.py         å…¨éå†æ¨¡å¼
â”‚
â”œâ”€â”€ dataset/graph/
â”‚   â”œâ”€â”€ physics_knowledge_graph_new.json     169èŠ‚ç‚¹
â”‚   â””â”€â”€ math_knowledge_graph_new.json        105èŠ‚ç‚¹
â”‚
â””â”€â”€ output/
    â””â”€â”€ */cross_domain_edges.json            è¾“å‡ºç»“æœ
```

## ğŸ¤– ä½¿ç”¨çš„Agent (4ä¸ª)

| Agent | è§’è‰² | è°ƒç”¨æ—¶æœº | èŒè´£ |
|-------|------|----------|------|
| **PhysicsAgent** | ç‰©ç†å­¦å®¶ | ç¬¬1è½® | ä»ç‰©ç†è§’åº¦åˆ†æèŠ‚ç‚¹å…³è” |
| **MathAgent** | æ•°å­¦å®¶ | ç¬¬2è½® | ä»æ•°å­¦è§’åº¦å›åº”å’Œåˆ†æ |
| **MetaAgent** | å…ƒåè°ƒè€… | è®¨è®ºå | æ£€æŸ¥åç¦»ã€æå–è¾¹ |
| **EvaluatorAgent** | è¯„ä¼°ä¸“å®¶ | æå–è¾¹å | è¯„ä¼°è¾¹çš„è´¨é‡ï¼Œå†³å®šä¿ç•™ |

## ğŸ”„ å®Œæ•´æµç¨‹ (å•å¯¹èŠ‚ç‚¹)

```
è¾“å…¥: physics_node_id, math_node_id
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: æ„å»ºä¸Šä¸‹æ–‡                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ è¯»å–physics_nodeçš„å®Œæ•´properties           â”‚
â”‚ â€¢ æ‰¾åˆ°ç›¸å…³ç‰©ç†èŠ‚ç‚¹(é€šè¿‡å›¾è°±è¾¹)                 â”‚
â”‚ â€¢ è¯»å–math_nodeçš„å®Œæ•´properties              â”‚
â”‚ â€¢ æ‰¾åˆ°ç›¸å…³æ•°å­¦èŠ‚ç‚¹                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: PhysicsAgent åˆ†æ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                        â”‚
â”‚   - physics_node + å­¦ç§‘å†…ä¸Šä¸‹æ–‡              â”‚
â”‚   - math_nodeä¿¡æ¯                           â”‚
â”‚ è¾“å‡º:                                        â”‚
â”‚   - physics_response (å…³è”åˆ†æ)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: MathAgent å›åº”                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                        â”‚
â”‚   - math_node + å­¦ç§‘å†…ä¸Šä¸‹æ–‡                â”‚
â”‚   - physics_nodeä¿¡æ¯                        â”‚
â”‚   - physics_response                        â”‚
â”‚ è¾“å‡º:                                        â”‚
â”‚   - math_response (å›åº”+åˆ†æ)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: MetaAgent æ£€æŸ¥åç¦»                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ£€æŸ¥:                                        â”‚
â”‚   âœ“ physics_node_id åœ¨ physics_response?   â”‚
â”‚   âœ“ math_node_id åœ¨ math_response?         â”‚
â”‚   âœ“ è®¨è®ºé•¿åº¦ >= 100å­—ç¬¦?                    â”‚
â”‚                                             â”‚
â”‚ å¦‚æœåç¦» â†’ çŸ«æ­£ â†’ è·³è¿‡                       â”‚
â”‚ å¦‚æœèšç„¦ â†’ ç»§ç»­                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: MetaAgent æå–è¾¹                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                        â”‚
â”‚   - physics_response + math_response        â”‚
â”‚ è¾“å‡º:                                        â”‚
â”‚   {                                         â”‚
â”‚     "source": "physics_node_id",           â”‚
â”‚     "target": "math_node_id",              â”‚
â”‚     "label": "requires",                   â”‚
â”‚     "properties": {                        â”‚
â”‚       "description": "...",                â”‚
â”‚       "reasoning": "...",                  â”‚
â”‚       "confidence": 0.9                    â”‚
â”‚     }                                       â”‚
â”‚   }                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: EvaluatorAgent è¯„ä¼°                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯„ä¼°æ ‡å‡†:                                    â”‚
â”‚   âœ“ å…³è”åˆç†?                               â”‚
â”‚   âœ“ æè¿°æ¸…æ™°?                               â”‚
â”‚   âœ“ confidence >= 0.6?                     â”‚
â”‚   âœ“ çœŸå®çš„è·¨å­¦ç§‘å…³è”?                        â”‚
â”‚                                             â”‚
â”‚ é€šè¿‡ â†’ ç»§ç»­                                 â”‚
â”‚ æ‹’ç» â†’ è·³è¿‡                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 7: Function Call å†™å…¥JSON              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ add_edge_to_json(file_path, edge)          â”‚
â”‚   â”œâ”€ è¯»å–ç°æœ‰æ–‡ä»¶                            â”‚
â”‚   â”œâ”€ è¿½åŠ edgeåˆ°edgesæ•°ç»„                    â”‚
â”‚   â”œâ”€ æ›´æ–°metadata                           â”‚
â”‚   â””â”€ å†™å›æ–‡ä»¶                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
è¾“å‡º: è¾¹å·²ä¿å­˜åˆ° cross_domain_edges.json
```

## ğŸ“Š æ•°æ®ç¤ºä¾‹

### è¾“å…¥ (èŠ‚ç‚¹)
```json
{
  "id": "displacement_velocity_acceleration",
  "label": "ä½ç§»ã€é€Ÿåº¦ä¸åŠ é€Ÿåº¦",
  "properties": {
    "description": "ç†è§£ä½ç§»ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦æ¦‚å¿µ...",
    "stage": "Compulsory",
    "subject": "Physics",
    "category": "æœºæ¢°è¿åŠ¨ä¸ç‰©ç†æ¨¡å‹",
    "theme": "æœºæ¢°è¿åŠ¨ä¸ç‰©ç†æ¨¡å‹",
    "cultivated_abilities": ["ç‰©ç†è§‚å¿µ", "ç§‘å­¦æ€ç»´"]
  }
}
```

### è¾“å‡º (è¾¹)
```json
{
  "source": "displacement_velocity_acceleration",
  "target": "function_definition_and_elements",
  "label": "requires",
  "properties": {
    "description": "ä½ç§»ã€é€Ÿåº¦å’ŒåŠ é€Ÿåº¦çš„å®šä¹‰ä¾èµ–å‡½æ•°æ¦‚å¿µ",
    "reasoning": "é€Ÿåº¦æ˜¯ä½ç§»å¯¹æ—¶é—´çš„å‡½æ•°...",
    "confidence": 0.92
  }
}
```

## ğŸ’¡ å…³é”®è®¾è®¡

### 1. ä¸ºä½•ç”¨4ä¸ªAgent?

```
å•Agentæ–¹æ¡ˆ âŒ
  â””â”€ æ— æ³•åŒæ—¶å…·å¤‡: é¢†åŸŸä¸“ä¸šçŸ¥è¯† + è·¨å­¦ç§‘è§†è§’ + å®¢è§‚è¯„ä¼°

å¤šAgentæ–¹æ¡ˆ âœ…
  â”œâ”€ PhysicsAgent:  æ·±åº¦ç‰©ç†çŸ¥è¯†
  â”œâ”€ MathAgent:     æ·±åº¦æ•°å­¦çŸ¥è¯†
  â”œâ”€ MetaAgent:     è·¨å­¦ç§‘æå–èƒ½åŠ›
  â””â”€ EvaluatorAgent: å®¢è§‚è¯„ä¼°æ ‡å‡†
```

### 2. ä¸ºä½•éœ€è¦å®Œæ•´properties?

```
åªæœ‰description âŒ
  â””â”€ "ç†è§£ä½ç§»ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦æ¦‚å¿µ..."

å®Œæ•´properties âœ…
  â”œâ”€ description:          è¯¦ç»†æè¿°
  â”œâ”€ category:             æœºæ¢°è¿åŠ¨ä¸ç‰©ç†æ¨¡å‹
  â”œâ”€ theme:                æœºæ¢°è¿åŠ¨ä¸ç‰©ç†æ¨¡å‹
  â”œâ”€ cultivated_abilities: ç‰©ç†è§‚å¿µ, ç§‘å­¦æ€ç»´
  â””â”€ stage/course_nature:  Compulsory

â†’ Agentæ‹¥æœ‰æ›´å¤šä¸Šä¸‹æ–‡ï¼Œåšå‡ºæ›´å‡†ç¡®çš„åˆ¤æ–­
```

### 3. ä¸ºä½•éœ€è¦å­¦ç§‘å†…ç›¸å…³èŠ‚ç‚¹?

```
å­¤ç«‹èŠ‚ç‚¹ âŒ
  [displacement_velocity_acceleration]
  â””â”€ Agentä¸çŸ¥é“è¿™ä¸ªæ¦‚å¿µåœ¨ç‰©ç†ä½“ç³»ä¸­çš„ä½ç½®

æºå¸¦ä¸Šä¸‹æ–‡ âœ…
  [displacement_velocity_acceleration]
  â”œâ”€ ç›¸å…³: kinematics_concepts (çˆ¶æ¦‚å¿µ)
  â”œâ”€ ç›¸å…³: velocity_concepts (ç»„æˆéƒ¨åˆ†)
  â”œâ”€ ç›¸å…³: acceleration_concept (ç»„æˆéƒ¨åˆ†)
  â””â”€ ç›¸å…³: uniformly_accelerated_linear_motion (åº”ç”¨)

â†’ Agentäº†è§£å‰ç½®ã€åç»­å’Œç›¸å…³çŸ¥è¯†
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹å¼1: å¿«é€Ÿæµ‹è¯• (10å¯¹, 2åˆ†é’Ÿ)
```bash
python run_small_sample.py
```

### æ–¹å¼2: é‡‡æ ·è®¨è®º (100-500å¯¹, 5-30åˆ†é’Ÿ)
```bash
python examples/sampled_cartesian_discussion.py
# é€‰æ‹©ç­–ç•¥: éšæœº/å…³é”®è¯/ä¸»é¢˜
```

### æ–¹å¼3: å…¨éå† (17,745å¯¹, 1-3å¤©)
```bash
nohup python examples/full_cartesian_discussion.py > log.txt 2>&1 &
```

## ğŸ“ˆ æ€§èƒ½æ•°æ®

| é¡¹ç›® | æ•°å€¼ |
|------|------|
| æ€»èŠ‚ç‚¹å¯¹æ•° | 105 Ã— 169 = 17,745 |
| æ¯å¯¹è€—æ—¶ | 3-5ç§’ |
| APIè°ƒç”¨/å¯¹ | 4æ¬¡ |
| æœ‰æ•ˆè¾¹æ¯”ä¾‹ | 30-50% |
| é¢„æœŸè¾“å‡ºè¾¹æ•° | 5,000-8,000æ¡ |

## ğŸ“ æ ¸å¿ƒä»£ç ä½ç½®

### ä¸»è¦æµç¨‹å®ç°
```python
# core/node_pair_chatroom.py

def discuss_node_pair(self, physics_node_id, math_node_id):
    """å•å¯¹èŠ‚ç‚¹è®¨è®ºçš„å®Œæ•´æµç¨‹"""
    # 1. æ„å»ºä¸Šä¸‹æ–‡
    physics_context = self._build_node_context(...)  # Line 145-157
    
    # 2. Physicsåˆ†æ
    physics_response = self._agent_discuss_node(...)  # Line 161-168
    
    # 3. Mathå›åº”
    math_response = self._agent_discuss_node(...)  # Line 172-180
    
    # 4. æ£€æŸ¥åç¦»
    if self._is_off_topic(...):  # Line 183-196
        return None
    
    # 5. æå–è¾¹
    edge = self._extract_edge(...)  # Line 199-208
    
    # 6. è¯„ä¼°
    is_valid, reason = self._evaluate_edge(edge)  # Line 212
    
    # 7. å†™å…¥
    if is_valid:
        self._write_edge_to_file(edge)  # Line 218
```

### Agentå®šä¹‰
```python
# agents/domain_agents.py (Line 10-50)
class PhysicsAgent(Agent):
    domain = "ç‰©ç†å­¦"

class MathAgent(Agent):
    domain = "æ•°å­¦"
```

### è¯„ä¼°é€»è¾‘
```python
# core/node_pair_chatroom.py (Line 399-437)
def _evaluate_edge(self, edge):
    """è¯„ä¼°è¾¹çš„è´¨é‡"""
    # è°ƒç”¨EvaluatorAgentçš„LLM
    # è¿”å› (is_valid, reason)
```

## ğŸ¯ æ€»ç»“

**ä¸€å¥è¯æè¿°**: 
4ä¸ªAgentåä½œï¼Œå¯¹ç‰©ç†å’Œæ•°å­¦å›¾è°±çš„èŠ‚ç‚¹è¿›è¡Œä¸¤ä¸¤é…å¯¹è®¨è®ºï¼Œæå–è·¨å­¦ç§‘è¾¹ï¼Œç»è¿‡è¯„ä¼°åé€šè¿‡function callå†™å…¥JSONã€‚

**æ ¸å¿ƒåˆ›æ–°**:
1. âœ… èŠ‚ç‚¹å¯¹è®¨è®ºï¼ˆç²¾ç¡®ã€å¯éªŒè¯ï¼‰
2. âœ… å®Œæ•´propertiesä¸Šä¸‹æ–‡ï¼ˆä¿¡æ¯ä¸°å¯Œï¼‰
3. âœ… å¤šAgentåä½œï¼ˆä¸“ä¸š+åè°ƒ+è¯„ä¼°ï¼‰
4. âœ… Function callå†™å…¥ï¼ˆæ ‡å‡†åŒ–ã€å¢é‡ï¼‰
